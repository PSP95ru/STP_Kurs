(function(){var e={9260:function(e,t,n){"use strict";n.d(t,{B:function(){return Ie}});var o=n(5471),r=n(8505),i=n(7954),s=function(){var e=this,t=e._self._c;return t(r.A,[t(i.A,[t("router-view")],1)],1)},c=[],a={name:"App",data:()=>({})},l=a,d=n(1656),u=(0,d.A)(l,s,c,!1,null,null,null),h=u.exports,g=n(173),m=function(){var e=this,t=e._self._c;return t(r.A,[t("tool-panel"),t("Canvas")],1)},p=[],f=n(6521),y=n(6420),x=n(9456),S=n(2987),E=n(1075),A=n(5678),w=n(8658),v=n(5937),L=n(5858),T=function(){var e=this,t=e._self._c;return t(w.A,{attrs:{app:"",location:"bottom"}},[t(S.A,[t(E.A,[t(A.pr,[t(A.UZ,[e._v("Блоки")]),t(y.A,{attrs:{exclusive:""},model:{value:e.blocksSelection,callback:function(t){e.blocksSelection=t},expression:"blocksSelection"}},[t("div",{attrs:{id:"wrapper_basic",width:"100%"}},e._l(e.BlocksCount,(function(o){return t(L.A,{key:o,scopedSlots:e._u([{key:"activator",fn:function({on:r,attrs:i}){return[t(f.A,e._g(e._b({on:{click:function(t){return e.selectionChanged(o-1)}}},"v-btn",i,!1),r),[t("img",{attrs:{src:n(6834)("./img"+e.Blocks[o-1].img+"Small.svg"),width:"30px"}})])]}}],null,!0)},[t("span",[e._v(" "+e._s(e.Blocks[o-1].description)+" ")])])})),1)])],1)],1),t(E.A,[t(A.UZ,[e._v("Инструменты")]),t(L.A,{scopedSlots:e._u([{key:"activator",fn:function({on:n,attrs:o}){return[t(f.A,e._g(e._b({on:{click:function(t){return e.properDelete()}}},"v-btn",o,!1),n),[t(x.A,[e._v("mdi-trash-can")])],1)]}}])},[t("span",[e._v(" Очистить схему ")])]),t(y.A,{attrs:{exclusive:""},model:{value:e.parametersSelection,callback:function(t){e.parametersSelection=t},expression:"parametersSelection"}},[t(L.A,{scopedSlots:e._u([{key:"activator",fn:function({on:n,attrs:o}){return[t(f.A,e._g(e._b({on:{click:function(t){return e.selectSelect()}}},"v-btn",o,!1),n),[t(x.A,[e._v("mdi-select")])],1)]}}])},[t("span",[e._v(" Выбор элемента ")])]),t(L.A,{scopedSlots:e._u([{key:"activator",fn:function({on:n,attrs:o}){return[t(f.A,e._g(e._b({on:{click:function(t){return e.selectArrow()}}},"v-btn",o,!1),n),[t(x.A,[e._v("mdi-ray-start-arrow")])],1)]}}])},[t("span",[e._v(" Стрелка между блоками ")])])],1)],1),t(E.A,[t(v.A,{attrs:{label:"Текст элемента"},model:{value:e.text,callback:function(t){e.text=t},expression:"text"}}),t(L.A,{scopedSlots:e._u([{key:"activator",fn:function({on:n,attrs:o}){return[t(f.A,e._g(e._b({on:{click:function(t){return e.confirmTextChange()}}},"v-btn",o,!1),n),[e._v("Подтвердить")])]}}])})],1),t(E.A,[t(v.A,{attrs:{label:"имя загружаемой схемы"},model:{value:e.loadSchemaName,callback:function(t){e.loadSchemaName=t},expression:"loadSchemaName"}})],1),t(E.A,[t(L.A,{scopedSlots:e._u([{key:"activator",fn:function({on:n,attrs:o}){return[t(f.A,e._g(e._b({on:{click:function(t){return e.getTheSchema()}}},"v-btn",o,!1),n),[e._v("Загрузить")])]}}])})],1),t(E.A,[t(v.A,{attrs:{label:"Название сохранемой схемы"},model:{value:e.saveSchemaName,callback:function(t){e.saveSchemaName=t},expression:"saveSchemaName"}})],1),t(E.A,[t(L.A,{scopedSlots:e._u([{key:"activator",fn:function({on:n,attrs:o}){return[t(f.A,e._g(e._b({on:{click:function(t){return e.loadTheSchema()}}},"v-btn",o,!1),n),[e._v("Сохранить")])]}}])})],1)],1)],1)},B=[],_=(n(4114),n(1829));function C(e,t){const n={x:t.x-e.x,y:t.y-e.y};return Math.abs(n.x)>Math.abs(n.y)?(n.x=Math.sign(n.x),n.y=0):(n.x=0,n.y=Math.sign(n.y)),n}function P(e,t,n,o){const r=o.find((e=>e.id===n.idStart)),i=o.find((e=>e.id===n.idEnd)),s=K(e,r,n.angleStart),c=K(e,i,n.angleEnd);t.unshift(j(s.x,s.y,n.id,-1)),t.push(j(c.x,c.y,n.id,t.length-1))}function O(e){const t=Math.sqrt(e.x*e.x+e.y*e.y);return{x:e.x/t,y:e.y/t}}function k(e){return{x:-1*e.y,y:e.x}}function D(e){return{x:-1*e.x,y:-1*e.y}}function M(e,t,n,o){let r="";return r+="M "+e.x+", "+e.y+"\n",r+="L "+t.x+", "+t.y+"\n",r+="L "+n.x+", "+n.y+"\n",r+="L "+o.x+", "+o.y+"\n",r+="L "+e.x+", "+e.y+"\n",r+="Z",r}function Y(e,t){const n=8,o={x:t.x-e.x,y:t.y-e.y},r=O(o),i=k(r);i.x=i.x*(n/2),i.y=i.y*(n/2);const s=D(i),c={x:e.x+i.x,y:e.y+i.y},a={x:e.x+s.x,y:e.y+s.y},l={x:t.x+s.x,y:t.y+s.y},d={x:t.x+i.x,y:t.y+i.y};return M(c,a,l,d)}function I(e,t,n){return(e-t.y)*(n.x-t.x)/(n.y-t.y)+t.x}function z(e,t,n){return(e-t.x)*(n.y-t.y)/(n.x-t.x)+t.y}function b(e,t,n){const o=e.centerX-e.sizeX/2,r=o+e.sizeX,i=e.centerY-e.sizeY/2,s=i+e.sizeY,c=[j(o,z(o,t,n),0),j(r,z(r,t,n),1),j(I(i,t,n),i,2),j(I(s,t,n),s,3)];let a=c.filter((e=>e.x>=o&&e.x<=r&&e.y>=i&&e.y<=s));a.length<1&&(a=c);let l=null,d=1e8;a.forEach((e=>{const t=(e.x-n.x)*(e.x-n.x)+(e.y-n.y)*(e.y-n.y);d>t&&(d=t,l=e)}));const u={x:-1,y:0};switch(l.arrowId){case 1:u.x=1;break;case 2:u.x=0,u.y=-1;break;case 3:u.x=0,u.y=1;break}return u}function X(e,t,n,o){let r={id:-1};const i=[...t];return i.forEach((t=>{if(-1===r.id){const i=ne[t.type].getPath(t);e.isPointInPath(new Path2D(i),n,o)&&(r=U(t.centerX,t.centerY,t.type,t.sizeX,t.sizeY,t.id))}})),-1===r.id&&(r=null),r}function N(e,t,n,o,r){return _.Ux.intersect(_.Q8.path(ne[e.type].getPath(e)),_.Q8.line([t,n],[o,r]))}function R(e,t,n){let o=null;const r=t.centerX,i=t.centerY;let s=0;return n.points.forEach((n=>{if((n.x-r)*(n.x-r)+(n.y-i)*(n.y-i)>s){const c=new Path2D(ne[t.type].getPath(t));(e.isPointInPath(c,n.x,n.y)||e.isPointInStroke(c,n.x,n.y))&&(s=(n.x-r)*(n.x-r)+(n.y-i)*(n.y-i),o=n)}})),o}function K(e,t,n){const o=H(n),r=Math.max(t.sizeX,t.sizeY),i=N(t,t.centerX,t.centerY,t.centerX+o.x*r,t.centerY+o.y*r);return R(e,t,i)}function U(e,t,n,o=se,r=se*ce,i=null,s=null){let c=ee.BLOCK_DEFALULT;return!0===re(n)&&(c=n),{id:i,centerX:e,centerY:t,sizeX:o,sizeY:r,type:c,text:s}}function G(e){return U(e.centerX,e.centerY,e.type,e.sizeX,e.sizeY,e.id,e.text)}function V(e,t=null,n=90,o=270,r=null,i=null){return{id:r,idStart:e,idEnd:t,angleStart:n,angleEnd:o}}function F(e){return V(e.idStart,e.idEnd,e.angleStart,e.angleEnd,e.id,e.text)}function j(e,t,n=null,o=null,r=null){return{id:r,x:e,y:t,arrowId:n,order:o}}function W(e){return j(e.x,e.y,e.arrowId,e.order,e.id)}function Z(e,t){const n=t.centerX,o=t.centerY,r=e.x,i=e.y;let s=Math.atan2(i-o,r-n);return s=180*s/Math.PI,-180===s&&(s=180),s}function H(e){const t={x:2,y:2},n=e*Math.PI/180,o={x:0,y:0};return o.y=1e3*Math.sin(n)*t.y,o.x=1e3*Math.cos(n)*t.x,o}function $(e,t,n,o,r=null){if(N(n,t.x,t.y,o.x,o.y).points.length>0){const i=R(e,n,N(n,t.x,t.y,o.x,o.y)),s=Z(i,n);let c=o,a=null,l=null;null!=r&&(c=R(e,r,N(r,t.x,t.y,o.x,o.y)),a=Z(c,r),l=r.id);const d=V(n.id,l,s,a);return d}return null}function Q(e,t,n,o,r){const i=[],s={x:2*Math.abs(n.x-t.x)*o.x,y:2*Math.abs(n.y-t.y)*o.y},c={x:2*Math.abs(n.x-t.x)*r.x,y:2*Math.abs(n.y-t.y)*r.y},a=_.Ux.intersect(_.Q8.line([t.x,t.y],[t.x+s.x,t.y+s.y]),_.Q8.line([n.x,n.y],[n.x+c.x,n.y+c.y]));if(1===a.points.length)i.push(j(a.points[0].x,a.points[0].y,e.id,0));else if(o.x===r.x&&o.y===r.y){const r={x:t.x+s.x/4,y:t.y+s.y/4},a={x:n.x+c.x/4,y:n.y+c.y/4};let l,d;0===o.x?(l={x:t.x,y:Math.max(r.y*o.y,a.y*o.y)*o.y},d={x:n.x,y:Math.max(r.y*o.y,a.y*o.y)*o.y}):(l={x:Math.max(r.x*o.x,a.x*o.x)*o.x,y:t.y},d={x:Math.max(r.x*o.x,a.x*o.x)*o.x,y:n.y}),i.push(j(l.x,l.y,e.id,0)),i.push(j(d.x,d.y,e.id,1))}else if(o.x===-1*r.x&&0!==o.x||o.y===-1*r.y&&0!==o.y)if(a.points.length>1);else if(Math.sign(n.x-t.x)===Math.sign(r.x)&&0!==o.x||Math.sign(n.y-t.y)===Math.sign(r.y)&&0!==o.y){const s=Math.min(Math.max(Math.abs(t.x-n.x),Math.abs(t.y-n.y)),se),c={x:t.x+o.x*s,y:t.y+o.y*s},a={x:n.x+r.x*s,y:t.y+o.y*s};let l,d;0===o.x?(l={x:c.x+s,y:c.y},d={x:l.x+s,y:a.y}):(l={x:c.x,y:c.y+s},d={x:a.x,y:l.y+s}),i.push(j(c.x,c.y,e.id,0)),i.push(j(l.x,l.y,e.id,1)),i.push(j(d.x,d.y,e.id,2)),i.push(j(a.x,a.y,e.id,3))}else{const r={x:t.x+s.x/4,y:t.y+s.y/4},c={x:r.x+(n.x-t.x)*Math.abs(o.y),y:r.y+(n.y-t.y)*Math.abs(o.x)};i.push(j(r.x,r.y,e.id,0)),i.push(j(c.x,c.y,e.id,1))}else{const a=Math.min(Math.max(Math.abs(t.x-n.x),Math.abs(t.y-n.y)),se),l={x:t.x+o.x*a,y:t.y+o.y*a},d={x:n.x+r.x*a,y:t.y+o.y*a},u=_.Ux.intersect(_.Q8.line([l.x,l.y],[l.x+c.x,l.y+c.y]),_.Q8.line([d.x,d.y],[d.x-s.x,d.y-s.y])).points[0];i.push(j(l.x,l.y,e.id,0)),i.push(j(u.x,u.y,e.id,1)),i.push(j(d.x,d.y,e.id,2))}return i}function q(e,t,n,o,r,i,s,c){const a=[i[n],i[n+1]],l=[t.angleStart,t.angleEnd],d=j((a[0].x+a[1].x)/2,(a[0].y+a[1].y)/2),u=C(a[0],a[1]),h=W(d);0===u.x?h.x=s:h.y=c;const g=[null,null],m=[null,null],p=[null,null];for(let y=0;y<2;y++){const t=a[y],n=i.findIndex((e=>e.id===t.id));if(n>0&&n<i.length-1){let e=W(t);0===u.x?e.x=s:e.y=c,g[y]=e;const o=2*y-1,r=n+o;Math.abs((i[r].x-t.x)*u.y+(i[r].y-t.y)*u.x)<ae&&(e=W(i[r]),0===u.x?e.x=s:e.y=c,g[y]=e,p[y]=W(t))}else{let n=null;n=0===y?o:r;const i=Math.max(n.sizeX,n.sizeY)+Math.max(Math.abs(a[1].x-a[0].x),Math.abs(a[1].y-a[0].y)),s=j(h.x+i*u.x,h.y+i*u.y),c=j(h.x+i*u.x*-1,h.y+i*u.y*-1),d=N(n,s.x,s.y,c.x,c.y);let g=null,p=-1e12,f=u;if(1===y&&(f=D(u)),d.points.forEach((o=>{if(o.x*f.x+o.y*f.y>p){const r=new Path2D(ne[n.type].getPath(n));(e.isPointInPath(r,o.x,o.y)||e.isPointInStroke(r,o.x,o.y))&&(g=j(o.x,o.y,t.arrowId),p=o.x*f.x+o.y*f.y)}})),null!=g)l[y]=Z(g,n);else{const e=n.centerX*Math.abs(u.x)+h.x*Math.abs(u.y),o=n.centerY*Math.abs(u.y)+h.y*Math.abs(u.x),r=W(t);r.x=e,r.y=o,m[y]=r;const i=C(j(n.centerX,n.centerY),r);1===i.x?l[y]=0:-1===i.x?l[y]=180:-1===i.y?l[y]=-90:l[y]=90}}}const f=F(t);return f.angleStart=l[0],f.angleEnd=l[1],{arrow:f,moved:g,deleted:p,added:m}}function J(e,t,n,o){return t.forEach((t=>{null!=e.moved[0]&&e.moved[0].id===t.id&&(t.x=e.moved[0].x,t.y=e.moved[0].y),null!=e.moved[1]&&e.moved[1].id===t.id&&(t.x=e.moved[1].x,t.y=e.moved[1].y),null!=e.deleted[0]&&t.order--,null!=e.added[0]&&t.order++})),null!=e.deleted[1]&&t.pop(),null!=e.deleted[0]&&t.shift(),null!=e.added[0]&&(t.unshift(e.added[0]),t[0].order=0),null!=e.added[1]&&(t.push(e.added[1]),t[t.length-1].order=t.length-1),P(o,t,e.arrow,n),t}const ee=Object.freeze({UNSELECT_TOOLS:-1,BLOCK_DEFALULT:0,BLOCK_DATA:0,BLOCK_RECORDED_DATA:1,BLOCK_RAM:2,BLOCK_SEQUENTIAL_ACCESS_MEMORY:3,BLOCK_DIRECT_ACCESS_MEMORY:4,BLOCK_DOCUMENT:5,BLOCK_MANUAL_INPUT:6,BLOCK_CARD:7,BLOCK_PAPER_TAPE:8,BLOCK_DISPLAY:9,BLOCK_PROCESS:10,BLOCK_DEFINED_PROCESS:11,BLOCK_MANUAL_OPERATION:12,BLOCK_PREPARATION:13,BLOCK_DECISION:14,ARROW_DEFAULT:15,PARAMETERS_SELECT:16});function te(e){let t=!1;for(const n in ee){const o=ee[n];o===e&&(t=!0)}return t}const ne={[ee.BLOCK_DATA]:{img:"Data",description:"Данные",getPath(e){const t=.25,n=e.sizeX,o=e.sizeY,r=e.centerX,i=e.centerY;let s="";return s+="M "+(r-n/2)+", "+(i+o/2)+"\n",s+="L "+(r-n/2+t*o)+", "+(i-o/2)+"\n",s+="L "+(r+n/2)+", "+(i-o/2)+"\n",s+="L "+(r+n/2-t*o)+", "+(i+o/2)+"\n",s+="L "+(r-n/2)+", "+(i+o/2)+"\n",s+="Z",s},getSectorVector(e,t,n){return b(e,t,n)},getTextArea(e){const t=.25,n=e.sizeX-t*e.sizeY*2,o=e.sizeY,r=e.centerY-e.sizeY/2,i=e.centerX-e.sizeX/2+e.sizeY*t;return{top:r,left:i,width:n,height:o}}},[ee.BLOCK_RECORDED_DATA]:{img:"RecData",description:"Запоминаемые данные",getPath(e){const t=e.sizeX,n=e.sizeY,o=e.centerX,r=e.centerY,i=n,s=2*Math.asin(n/2/i),c=i*(1-Math.cos(s/2));let a="";return a+="M "+(o-t/2+c)+", "+(r+n/2)+"\n",a+="A "+i+" "+i+" 0 0 1 "+(o-t/2+c)+" "+(r-n/2)+"\n",a+="L "+(o+t/2)+", "+(r-n/2)+"\n",a+="A "+i+" "+i+" 0 0 0 "+(o+t/2)+" "+(r+n/2)+"\n",a+="L "+(o-t/2+c)+", "+(r+n/2)+"\n",a+="Z",a},getSectorVector(e,t,n){return b(e,t,n)},getTextArea(e){const t=e.sizeY*(1-Math.cos(.5)),n=e.sizeX-2*t,o=e.sizeY,r=e.centerY-e.sizeY/2,i=e.centerX-e.sizeX/2+t;return{top:r,left:i,width:n,height:o}}},[ee.BLOCK_RAM]:{img:"RAM",description:"Оперативное ЗУ",getPath(e){const t=e.sizeY,n=e.centerX,o=e.centerY,r=.15*t;let i="";return i+="M "+(n-t/2)+", "+(o-t/2)+"\n",i+="L "+(n-t/2)+", "+(o+t/2)+"\n",i+="L "+(n+t/2)+", "+(o+t/2)+"\n",i+="L "+(n+t/2)+", "+(o-t/2)+"\n",i+="L "+(n-t/2)+", "+(o-t/2)+"\n",i+="M "+(n-t/2+r)+", "+(o-t/2)+"\n",i+="L "+(n-t/2+r)+", "+(o+t/2)+"\n",i+="M "+(n-t/2)+", "+(o-t/2+r)+"\n",i+="L "+(n+t/2)+", "+(o-t/2+r)+"\n",i+="Z",i},getSectorVector(e,t,n){return b(e,t,n)},getTextArea(e){const t=.15*e.sizeY,n=e.sizeY-t,o=e.sizeY-t,r=e.centerY-e.sizeY/2+t,i=e.centerX-e.sizeY/2+t;return{top:r,left:i,width:n,height:o}}},[ee.BLOCK_SEQUENTIAL_ACCESS_MEMORY]:{img:"SeqMem",description:"ЗУ с последовательным доступом",getPath(e){const t=e.sizeY,n=e.centerX,o=e.centerY,r=t/2;let i="";return i+="M "+n+", "+(o+r)+"\n",i+="A "+r+" "+r+" 0 1 1 "+n+" "+(o-r)+"\n",i+="A "+r+" "+r+" 0 1 1 "+n+" "+(o+r)+"\n",i+="L "+(n+r)+", "+(o+r)+"\n",i+="Z",i},getSectorVector(e,t,n){return b(e,t,n)},getTextArea(e){const t=e.sizeY/Math.SQRT2,n=t,o=t,r=e.centerY-t/2,i=e.centerX-t/2;return{top:r,left:i,width:n,height:o}}},[ee.BLOCK_DIRECT_ACCESS_MEMORY]:{img:"DirectMem",description:"ЗУ с прямым доступом",getPath(e){const t=e.sizeX,n=e.sizeY,o=e.centerX,r=e.centerY,i=n,s=2*Math.asin(n/2/i),c=i*(1-Math.cos(s/2));let a="";return a+="M "+(o-t/2+c)+", "+(r+n/2)+"\n",a+="A "+i+" "+i+" 0 0 1 "+(o-t/2+c)+" "+(r-n/2)+"\n",a+="L "+(o+t/2-c)+", "+(r-n/2)+"\n",a+="A "+i+" "+i+" 0 0 0 "+(o+t/2-c)+" "+(r+n/2)+"\n",a+="A "+i+" "+i+" 0 0 0 "+(o+t/2-c)+" "+(r-n/2)+"\n",a+="A "+i+" "+i+" 0 0 0 "+(o+t/2-c)+" "+(r+n/2)+"\n",a+="L "+(o-t/2+c)+", "+(r+n/2)+"\n",a+="Z",a},getSectorVector(e,t,n){return b(e,t,n)},getTextArea(e){const t=e.sizeY*(1-Math.cos(.5)),n=e.sizeX-3*t,o=e.sizeY,r=e.centerY-e.sizeY/2,i=e.centerX-e.sizeX/2+t;return{top:r,left:i,width:n,height:o}}},[ee.BLOCK_DOCUMENT]:{img:"Document",description:"Документ",getPath(e){const t=e.sizeX,n=e.sizeY,o=e.centerX,r=e.centerY,i=n,s=2*Math.asin(t/4/i),c=i*(1-Math.cos(s/2));let a="";return a+="M "+(o-t/2)+", "+(r-n/2)+"\n",a+="L "+(o-t/2)+", "+(r+n/2-c)+"\n",a+="A "+i+" "+i+" 0 0 0 "+o+" "+(r+n/2-c)+"\n",a+="A "+i+" "+i+" 0 0 1 "+(o+t/2)+" "+(r+n/2-c)+"\n",a+="L "+(o+t/2)+", "+(r-n/2)+"\n",a+="L "+(o-t/2)+", "+(r-n/2)+"\n",a+="Z",a},getSectorVector(e,t,n){return b(e,t,n)},getTextArea(e){const t=e.sizeY*(1-Math.cos(Math.asin(e.sizeX/4/e.sizeY))),n=e.sizeX,o=e.sizeY-2*t,r=e.centerY-e.sizeY/2,i=e.centerX-e.sizeX/2+t;return{top:r,left:i,width:n,height:o}}},[ee.BLOCK_MANUAL_INPUT]:{img:"ManualInput",description:"Ручной ввод",getPath(e){const t=e.sizeX,n=e.sizeY,o=e.centerX,r=e.centerY,i=.25*n;let s="";return s+="M "+(o-t/2)+", "+(r+n/2)+"\n",s+="L "+(o-t/2)+", "+(r-n/2+i)+"\n",s+="L "+(o+t/2)+", "+(r-n/2)+"\n",s+="L "+(o+t/2)+", "+(r+n/2)+"\n",s+="Z",s},getSectorVector(e,t,n){return b(e,t,n)},getTextArea(e){const t=.25,n=e.sizeX,o=e.sizeY*(1-t),r=e.centerY-e.sizeY/2+t*e.sizeY,i=e.centerX-e.sizeX/2;return{top:r,left:i,width:n,height:o}}},[ee.BLOCK_CARD]:{img:"Card",description:"Карта",getPath(e){const t=e.sizeX,n=e.sizeY,o=e.centerX,r=e.centerY,i=.25*n;let s="";return s+="M "+(o-t/2)+", "+(r+n/2)+"\n",s+="L "+(o-t/2)+", "+(r-n/2+i)+"\n",s+="L "+(o-t/2+i)+", "+(r-n/2)+"\n",s+="L "+(o+t/2)+", "+(r-n/2)+"\n",s+="L "+(o+t/2)+", "+(r+n/2)+"\n",s+="Z",s},getSectorVector(e,t,n){return b(e,t,n)},getTextArea(e){const t=.25,n=e.sizeX-e.sizeY*t/2,o=e.sizeY*(1-t/2),r=e.centerY-e.sizeY/2+t*e.sizeY/2,i=e.centerX-e.sizeX/2+e.sizeY*t/2;return{top:r,left:i,width:n,height:o}}},[ee.BLOCK_PAPER_TAPE]:{img:"PaperTape",description:"Бумажная лента",getPath(e){const t=e.sizeX,n=e.sizeY,o=e.centerX,r=e.centerY,i=n,s=2*Math.asin(t/4/i),c=i*(1-Math.cos(s/2));let a="";return a+="M "+(o-t/2)+", "+(r-n/2+c)+"\n",a+="L "+(o-t/2)+", "+(r+n/2-c)+"\n",a+="A "+i+" "+i+" 0 0 0 "+o+" "+(r+n/2-c)+"\n",a+="A "+i+" "+i+" 0 0 1 "+(o+t/2)+" "+(r+n/2-c)+"\n",a+="L "+(o+t/2)+", "+(r-n/2+c)+"\n",a+="A "+i+" "+i+" 0 0 0 "+o+" "+(r-n/2+c)+"\n",a+="A "+i+" "+i+" 0 0 1 "+(o-t/2)+" "+(r-n/2+c)+"\n",a+="L "+(o-t/2)+", "+(r-n/2+c)+"\n",a+="Z",a},getSectorVector(e,t,n){return b(e,t,n)},getTextArea(e){const t=e.sizeY*(1-Math.cos(Math.asin(e.sizeX/4/e.sizeY))),n=e.sizeX,o=e.sizeY-4*t,r=e.centerY-e.sizeY/2+2*t,i=e.centerX-e.sizeX/2+t;return{top:r,left:i,width:n,height:o}}},[ee.BLOCK_DISPLAY]:{img:"Display",description:"Дисплей",getPath(e){const t=e.sizeX,n=e.sizeY,o=e.centerX,r=e.centerY,i=n;let s="";s+="M "+(o+t/2-n)+", "+(r+n/2)+"\n",s+="A "+i+" "+i+" 0 0 1 "+(o-t/2)+" "+r+"\n",s+="A "+i+" "+i+" 0 0 1 "+(o+t/2-n)+" "+(r-n/2)+"\n";const c=2*Math.asin(n/2/i),a=i*(1-Math.cos(c/2));return s+="L "+(o+t/2-a)+", "+(r-n/2)+"\n",s+="A "+i+" "+i+" 0 0 1 "+(o+t/2-a)+" "+(r+n/2)+"\n",s+="L "+(o+t/2-n)+", "+(r+n/2)+"\n",s+="Z",s},getSectorVector(e,t,n){return b(e,t,n)},getTextArea(e){const t=e.sizeY*(1-Math.cos(.5)),n=e.sizeX-e.sizeY,o=e.sizeX-t-n,r=e.sizeY,i=e.centerY-e.sizeY/2,s=e.centerX-e.sizeX/2+n;return{top:i,left:s,width:o,height:r}}},[ee.BLOCK_PROCESS]:{img:"Process",description:"Процесс",getPath(e){const t=e.sizeX,n=e.sizeY,o=e.centerX,r=e.centerY;let i="";return i+="M "+(o-t/2)+", "+(r-n/2)+"\n",i+="L "+(o-t/2)+", "+(r+n/2)+"\n",i+="L "+(o+t/2)+", "+(r+n/2)+"\n",i+="L "+(o+t/2)+", "+(r-n/2)+"\n",i+="L "+(o-t/2)+", "+(r-n/2)+"\n",i+="Z",i},getSectorVector(e,t,n){return b(e,t,n)},getTextArea(e){const t=e.sizeX,n=e.sizeY,o=e.centerY-e.sizeY/2,r=e.centerX-e.sizeX/2;return{top:o,left:r,width:t,height:n}}},[ee.BLOCK_DEFINED_PROCESS]:{img:"DefProcess",description:"Предопределенный процесс",getPath(e){const t=e.sizeX,n=e.sizeY,o=e.centerX,r=e.centerY,i=.15*t;let s="";return s+="M "+(o-t/2)+", "+(r-n/2)+"\n",s+="L "+(o-t/2)+", "+(r+n/2)+"\n",s+="L "+(o+t/2)+", "+(r+n/2)+"\n",s+="L "+(o+t/2)+", "+(r-n/2)+"\n",s+="L "+(o-t/2)+", "+(r-n/2)+"\n",s+="M "+(o-t/2+i)+", "+(r-n/2)+"\n",s+="L "+(o-t/2+i)+", "+(r+n/2)+"\n",s+="M "+(o+t/2-i)+", "+(r-n/2)+"\n",s+="L "+(o+t/2-i)+", "+(r+n/2)+"\n",s+="Z",s},getSectorVector(e,t,n){return b(e,t,n)},getTextArea(e){const t=.15*e.sizeX,n=e.sizeX-2*t,o=e.sizeY,r=e.centerY-e.sizeY/2,i=e.centerX-e.sizeX/2+t;return{top:r,left:i,width:n,height:o}}},[ee.BLOCK_MANUAL_OPERATION]:{img:"ManualOperation",description:"Ручная операция",getPath(e){const t=e.sizeX,n=e.sizeY,o=e.centerX,r=e.centerY,i=(t-n)/2;let s="";return s+="M "+(o-t/2)+", "+(r-n/2)+"\n",s+="L "+(o+t/2)+", "+(r-n/2)+"\n",s+="L "+(o+t/2-i)+", "+(r+n/2)+"\n",s+="L "+(o-t/2+i)+", "+(r+n/2)+"\n",s+="L "+(o-t/2)+", "+(r-n/2)+"\n",s+="Z",s},getSectorVector(e,t,n){return b(e,t,n)},getTextArea(e){const t=(e.sizeX-e.sizeY)/2,n=e.sizeX-2*t,o=e.sizeY,r=e.centerY-e.sizeY/2,i=e.centerX-e.sizeX/2+t;return{top:r,left:i,width:n,height:o}}},[ee.BLOCK_PREPARATION]:{img:"Prep",description:"Подготовка",getPath(e){const t=e.sizeX,n=e.sizeY,o=e.centerX,r=e.centerY,i=(t-n)/2;let s="";return s+="M "+(o-t/2+i)+", "+(r-n/2)+"\n",s+="L "+(o+t/2-i)+", "+(r-n/2)+"\n",s+="L "+(o+t/2)+", "+r+"\n",s+="L "+(o+t/2-i)+", "+(r+n/2)+"\n",s+="L "+(o-t/2+i)+", "+(r+n/2)+"\n",s+="L "+(o-t/2)+", "+r+"\n",s+="L "+(o-t/2+i)+", "+(r-n/2)+"\n",s+="Z",s},getSectorVector(e,t,n){return b(e,t,n)},getTextArea(e){const t=(e.sizeX-e.sizeY)/2,n=e.sizeX-2*t,o=e.sizeY,r=e.centerY-e.sizeY/2,i=e.centerX-e.sizeX/2+t;return{top:r,left:i,width:n,height:o}}},[ee.BLOCK_DECISION]:{img:"Decision",description:"Решение",getPath(e){const t=e.sizeX,n=e.sizeY,o=e.centerX,r=e.centerY;let i="";return i+="M "+(o-t/2)+", "+r+"\n",i+="L "+o+", "+(r-n/2)+"\n",i+="L "+(o+t/2)+", "+r+"\n",i+="L "+o+", "+(r+n/2)+"\n",i+="L "+(o-t/2)+", "+r+"\n",i+="Z",i},getSectorVector(e,t,n){return b(e,t,n)},getTextArea(e){const t=e.sizeX/2,n=e.sizeY/2,o=e.centerY-e.sizeY/4,r=e.centerX-e.sizeX/4;return{top:o,left:r,width:t,height:n}}}},oe=15;function re(e){let t=!1;for(const n in ne)n<=e&&n>=e&&(t=!0);return t}const ie=Object.freeze({SELECT_NONE_SELECTED:0,SELECT_BLOCK_SELECTED:1,SELECT_ARROW_SEGMENT_SELECTED:2,MOVE_BLOCK_IS_BEING_MOVED:3,MOVE_ARROW_SEGMENT_IS_BEING_MOVED:4,ARROWPLACING_STARTPOINT_DEFINED:5}),se=180,ce=2/3,ae=1e-6;let le=1;function de(e){le=e}var ue=n(5353),he={data:()=>({Blocks:ne,BlocksCount:oe,blocksSelection:0,parametersSelection:-1,text:"",saveSchemaName:"",loadSchemaName:""}),methods:{...(0,ue.i0)(["changeTool","clearSchema","changeBlockText","saveSchema","loadSchema"]),selectionChanged(e){this.changeTool(e),this.parametersSelection=-1},selectSelect(){this.changeTool(ee.PARAMETERS_SELECT),this.blocksSelection=-1},selectArrow(){this.changeTool(ee.ARROW_DEFAULT),this.blocksSelection=-1},properDelete(){this.clearSchema()},confirmTextChange(){const e=G(this.getBlocks.find((e=>e.id===this.getSelectedBlockID)));e.text=this.text,this.changeBlockText(e)},getTheSchema(){this.loadSchema(this.loadSchemaName)},loadTheSchema(){this.saveSchema(this.saveSchemaName)}},computed:{...(0,ue.L8)(["getBlocks","getSelectedBlockID"])},created(){Ie.$on("selectionChanged",(()=>{null!=this.getSelectedBlockID&&(this.text=this.getBlocks.find((e=>e.id===this.getSelectedBlockID)).text)}))}},ge=he,me=(0,d.A)(ge,T,B,!1,null,"5221d9cc",null),pe=me.exports,fe=n(1689),ye=function(){var e=this,t=e._self._c;return t(fe.A,{staticStyle:{position:"absolute",display:"absolute"},attrs:{id:"canvasContiner",height:"6000px",width:"6000px"}},[t(fe.A,{staticStyle:{display:"none"}},e._l(e.BlocksCount,(function(o){return t("img",{key:o,attrs:{src:n(3215)("./img"+e.Blocks[o-1].img+"Big.svg"),id:e.Blocks[o-1].img,width:"STANDARD_BLOCK_WIDTH",height:"STANDARD_BLOCK_WIDTH * STANDARD_BLOCK_HEIGHT_MULTIPLYER"}})})),0),t("canvas",{staticStyle:{position:"absolute","z-index":"0"},attrs:{id:"flowchart"}},[e._v("Обновите браузер ")]),t("canvas",{staticStyle:{position:"absolute","z-index":"1"},attrs:{id:"toolLayer"}})],1)},xe=[];oe>oe+1&&V();var Se={data:()=>({Blocks:ne,BlocksCount:oe,STANDARD_BLOCK_WIDTH:se,STANDARD_BLOCK_HEIGHT_MULTIPLYER:ce}),methods:{drawSelectionFigure(e,t,n,o=!1){const r=5,i=2;n.strokestyle="black",n.globalAlpha=1,o?n.fillRect(e-i,t-i,r,r):n.strokeRect(e-i,t-i,r,r),n.globalAlpha=.5},drawBoxSelection(e){this.clearToolLayer();const t=document.getElementById("toolLayer"),n=t.getContext("2d"),o=e.centerX-e.sizeX/2,r=e.centerX,i=e.centerX+e.sizeX/2,s=e.centerY-e.sizeY/2,c=e.centerY,a=e.centerY+e.sizeY/2,l=[o,r,i,i,i,r,o,o],d=[s,s,s,c,a,a,a,c];for(let u=0;u<8;u++)this.drawSelectionFigure(l[u],d[u],n)},drawArrowSelection(e,t){this.clearToolLayer();const n=document.getElementById("toolLayer"),o=n.getContext("2d"),r=this.getArrowPoints(e);P(o,r,e,this.getBlocks);for(let i=0;i<r.length;i++)this.drawSelectionFigure(r[i].x,r[i].y,o,!1),i===t&&this.drawSelectionFigure((r[i].x+r[i+1].x)/2,(r[i].y+r[i+1].y)/2,o,!0)},clearToolLayer(){const e=document.getElementById("toolLayer"),t=e.getContext("2d"),n=document.getElementsByClassName("toolLayer");for(let o=0;o<n.length;o++)n[o].remove();t.clearRect(0,0,e.width,e.height)},userInputHandler(e){this.userOperationPlacingNewBlock(e),this.userOperationSelectingBlockOrArrowSegment(e),this.userOperationMovingBlock(e),this.userOperationPlacingNewArrow(e),this.userOperationMovingArrowSegment(e)},userOperationPlacingNewBlock(e){if(!0===re(this.getTool)){if("click"===e.type&&(this.placeNewBlock(e.offsetX*le,e.offsetY,this.getTool),this.clearToolLayer(),this.changeTool(ee.UNSELECT_TOOLS)),"mouseenter"===e.type||"mousemove"===e.type){this.clearToolLayer();const t=document.getElementById("toolLayer"),n=t.getContext("2d"),o=U(e.offsetX*le,e.offsetY,this.getTool);this.drawBlock(n,o)}"mouseleave"===e.type&&this.clearToolLayer()}},userOperationSelectingBlockOrArrowSegment(e){if(this.getTool===ee.PARAMETERS_SELECT&&"click"===e.type){const t=document.getElementById("flowchart"),n=t.getContext("2d"),o=this.getBlocks,r={x:e.offsetX*le,y:e.offsetY},i=X(n,o,r.x,r.y);null!=i&&(this.selectBlock(i.id),this.drawBoxSelection(i),this.changeTool(ee.UNSELECT_TOOLS));let s=null,c=null;const a=this.getArrows;a.forEach((e=>{const t=this.getArrowPoints(e);P(n,t,e,o);let i=0;while(i<t.length-1&&null===s){const o=t[i],a=t[i+1],l=Y(o,a);n.isPointInPath(new Path2D(l),r.x,r.y)&&(s=e,c=i),i++}})),null!=s&&(this.selectArrow({arrowId:s.id,pointIndex:c}),this.drawArrowSelection(s,c),this.changeTool(ee.UNSELECT_TOOLS))}},userOperationMovingBlock(e){if(this.getTool===ee.UNSELECT_TOOLS&&this.getCurrentStep===ie.SELECT_BLOCK_SELECTED&&null!=this.getSelectedBlockID&&"mousedown"===e.type){this.changeCurrentStep(ie.MOVE_BLOCK_IS_BEING_MOVED),this.clearToolLayer();const t=this.getBlocks.find((e=>e.id===this.getSelectedBlockID));this.drawBoxSelection(t);const n=document.getElementById("toolLayer"),o=n.getContext("2d"),r=G(t);r.centerX=e.offsetX*le,r.centerY=e.offsetYT,this.drawBlock(o,r)}if(this.getTool===ee.UNSELECT_TOOLS&&this.getCurrentStep===ie.MOVE_BLOCK_IS_BEING_MOVED&&null!=this.getSelectedBlockID){if("mousemove"===e.type){this.clearToolLayer();const t=this.getBlocks.find((e=>e.id===this.getSelectedBlockID));this.drawBoxSelection(t);const n=document.getElementById("toolLayer"),o=n.getContext("2d"),r=G(t);r.centerX=e.offsetX*le,r.centerY=e.offsetYT,this.drawBlock(o,r)}if("mouseleave"===e.type&&(this.changeCurrentStep(ie.SELECT_NONE_SELECTED),this.clearToolLayer(),this.unselect()),"mouseup"===e.type){this.clearToolLayer();const t={id:this.getSelectedBlockID,X:e.offsetX*le,Y:e.offsetY};this.moveBlock(t),this.unselect()}}},userOperationMovingArrowSegment(e){if(this.getTool===ee.UNSELECT_TOOLS&&this.getCurrentStep===ie.SELECT_ARROW_SEGMENT_SELECTED&&null!=this.getSelectedArrowID){const t=document.getElementById("toolLayer"),n=t.getContext("2d");if("mousedown"===e.type){this.clearToolLayer();const t=this.getArrows.find((e=>e.id===this.getSelectedArrowID));let o=this.getArrowPoints(t);const r=this.getArrowPoints(t);if(P(n,r,t,this.getBlocks),o.length>0){const i=this.getBlocks.find((e=>e.id===t.idStart)),s=this.getBlocks.find((e=>e.id===t.idEnd)),c=q(n,t,this.getSelectedSegmentPointIndex,i,s,r,e.offsetX*le,e.offsetY);o=J(c,o,this.getBlocks,n),this.drawArrow(n,c.arrow,o),this.changeCurrentStep(ie.MOVE_ARROW_SEGMENT_IS_BEING_MOVED)}else this.changeCurrentStep(ie.SELECT_NONE_SELECTED),this.unselect()}}if(this.getTool===ee.UNSELECT_TOOLS&&this.getCurrentStep===ie.MOVE_ARROW_SEGMENT_IS_BEING_MOVED&&null!=this.getSelectedArrowID){const t=document.getElementById("toolLayer"),n=t.getContext("2d");if("mousemove"===e.type){this.clearToolLayer();const t=this.getArrows.find((e=>e.id===this.getSelectedArrowID));let o=this.getArrowPoints(t);const r=this.getArrowPoints(t);P(n,r,t,this.getBlocks);const i=this.getBlocks.find((e=>e.id===t.idStart)),s=this.getBlocks.find((e=>e.id===t.idEnd)),c=q(n,t,this.getSelectedSegmentPointIndex,i,s,r,e.offsetX*le,e.offsetY);o=J(c,o,this.getBlocks,n),this.drawArrow(n,c.arrow,o)}if("mouseleave"===e.type&&(this.changeCurrentStep(ie.SELECT_NONE_SELECTED),this.clearToolLayer(),this.unselect()),"mouseup"===e.type){const t=this.getArrows.find((e=>e.id===this.getSelectedArrowID)),o=this.getArrowPoints(t),r=this.getArrowPoints(t);if(P(n,r,t,this.getBlocks),o.length>0){const o=this.getBlocks.find((e=>e.id===t.idStart)),i=this.getBlocks.find((e=>e.id===t.idEnd)),s=q(n,t,this.getSelectedSegmentPointIndex,o,i,r,e.offsetX*le,e.offsetY);this.clearToolLayer(),this.moveArrowSegment(s)}this.unselect()}}},userOperationPlacingNewArrow(e){if(this.getTool===ee.ARROW_DEFAULT&&this.getCurrentStep===ie.SELECT_NONE_SELECTED&&"mousedown"===e.type){this.clearToolLayer();const t=document.getElementById("flowchart"),n=t.getContext("2d"),o=X(n,this.getBlocks,e.offsetX*le,e.offsetY);null!=o?this.defineStartPoint({x:e.offsetX*le,y:e.offsetY}):this.unselect()}if(this.getTool===ee.ARROW_DEFAULT&&this.getCurrentStep===ie.ARROWPLACING_STARTPOINT_DEFINED)if("mouseleave"===e.type)this.clearToolLayer(),this.unselect();else if("mousemove"===e.type){this.clearToolLayer();const t=document.getElementById("flowchart"),n=t.getContext("2d"),o=X(n,this.getBlocks,this.getArrowStartPoint.x,this.getArrowStartPoint.y);let r={x:e.offsetX*le,y:e.offsetY};const i=X(n,this.getBlocks,r.x,r.y),s=$(n,this.getArrowStartPoint,o,r,i);if(null!=s){const e=K(n,o,s.angleStart);null!=i&&(r=R(n,i,N(i,e.x,e.y,r.x,r.y)));const t=document.getElementById("toolLayer"),c=t.getContext("2d");this.drawArrowSegment(c,s,e.x,e.y,r.x,r.y)}}else if("mouseup"===e.type){this.clearToolLayer();const t=document.getElementById("flowchart"),n=t.getContext("2d"),o={x:this.getArrowStartPoint.x,y:this.getArrowStartPoint.y},r=X(n,this.getBlocks,this.getArrowStartPoint.x,this.getArrowStartPoint.y),i={x:e.offsetX*le,y:e.offsetY},s=X(n,this.getBlocks,i.x,i.y),c=$(n,this.getArrowStartPoint,r,i,s);if(null!=c.idEnd&&(this.addArrow(c),!e.altKey)){const e=this.getArrows.find((e=>c.idStart===e.idStart&&c.idEnd===e.idEnd&&c.angleStart===e.angleStart&&c.angleEnd===e.angleEnd)),t=K(n,r,c.angleStart),a=K(n,s,c.angleEnd),l=ne[r.type].getSectorVector(r,o,i),d=ne[s.type].getSectorVector(s,i,o),u=Q(e,t,a,l,d);u.forEach((e=>this.addPoint(e)))}this.unselect(),this.changeTool(ee.UNSELECT_TOOLS)}},...(0,ue.i0)(["addBlock","addArrow","addPoint","changeTool","selectBlock","selectArrow","defineStartPoint","countUpGraphicsSemaphore","countDownGraphicsSemaphore","unselect","moveBlock","changeCurrentStep","moveArrowSegment"]),drawSchema(){this.clearToolLayer();const e=document.getElementById("flowchart"),t=e.getContext("2d"),n=document.getElementsByClassName("flowchart");for(let o=0;o<n.length;o++)n[o].remove();t.clearRect(0,0,e.width,e.height),this.getArrows.forEach((e=>{const n=this.getArrowPoints(e);P(t,n,e,this.getBlocks),this.drawArrow(t,e,n)})),this.getBlocks.forEach((e=>{this.drawBlock(t,e)}))},drawBlock(e,t){e.save(),e.fillStyle="white",e.lineWidth=3;const n=new Path2D(ne[t.type].getPath(t));e.fill(n),e.stroke(n);const o=ne[t.type].getTextArea(t),r=document.createElement("div"),i=Number(window.getComputedStyle(document.body).getPropertyValue("font-size").match(/\d+/)[0]);r.className=e.canvas.id,r.setAttribute("style","top:"+(o.top+i/2)+"px; left:"+(o.left+i/2)/le+"px; width:"+(o.width-i/2)/le+"px; height:"+(o.height-i/2)+"px; overflow: hidden; position: absolute;"),null==t.text&&(t.text="");const s=document.createTextNode(t.text);r.appendChild(s);const c=e.canvas;c.parentElement.appendChild(r),e.restore()},drawArrow(e,t,n){for(let a=0;a<n.length-1;a++)this.drawArrowSegment(e,t,n[a].x,n[a].y,n[a+1].x,n[a+1].y);const o=n[n.length-1].x,r=n[n.length-1].y,i=n[n.length-2].x,s=n[n.length-2].y;let c=Math.atan((r-s)/(o-i));c+=(o>=i?90:-90)*Math.PI/180,e.save(),e.fillStyle="black",e.beginPath(),e.translate(o,r),e.rotate(c),e.moveTo(0,0),e.lineTo(5,20),e.lineTo(-5,20),e.closePath(),e.restore(),e.fill()},drawArrowSegment(e,t,n,o,r,i){const s=new Path2D;s.moveTo(n,o),s.lineTo(r,i),s.closePath(),e.stroke(s)},placeNewBlock(e,t,n){const o=se,r=o*ce,i=U(e,t,n,o,r);this.addBlock(i).then((()=>{Ie.$emit("timetoDraw")}))}},computed:{...(0,ue.L8)(["getTool","getBlocks","getArrows","getCurrentStep","getGraphicsSemaphore","getSelectedBlockID","getSelectedArrowID","getArrowStartPoint","getArrowPoints","getSelectedSegmentPointIndex"])},mounted(){const e=document.getElementById("flowchart");e.style.width="100%",e.style.height="100%",e.width=e.offsetWidth,e.height=e.offsetHeight;const t=document.getElementById("toolLayer");t.style.width="100%",t.style.height="100%",t.width=t.offsetWidth,t.height=t.offsetHeight;const n=t.getContext("2d");n.globalAlpha=.5;const o=document.getElementById("canvasContiner");o.addEventListener("click",this.userInputHandler),o.addEventListener("mouseenter",this.userInputHandler),o.addEventListener("mousemove",this.userInputHandler),o.addEventListener("mouseleave",this.userInputHandler),o.addEventListener("mousedown",this.userInputHandler),o.addEventListener("mouseup",this.userInputHandler),de((t.width+300)/t.width)},created(){Ie.$on("timeToDraw",(()=>{while(this.getGraphicsSemaphore>0);this.countUpGraphicsSemaphore(),this.drawSchema(),this.countDownGraphicsSemaphore()}))}},Ee=Se,Ae=(0,d.A)(Ee,ye,xe,!1,null,null,null),we=Ae.exports,ve={name:"Home",components:{ToolPanel:pe,Canvas:we}},Le=ve,Te=(0,d.A)(Le,m,p,!1,null,null,null),Be=Te.exports;o.Ay.use(g.Ay);const _e=[{path:"/",name:"home",component:Be},{path:"/about",name:"about",component:()=>n.e(594).then(n.bind(n,7992))}],Ce=new g.Ay({routes:_e});var Pe=Ce,Oe=n(4692),ke=n.n(Oe);o.Ay.use(ue.Ay);var De=new ue.Ay.Store({state:{tool:1,currentStep:0,selectedBlockID:null,selectedArrowID:null,selectedSegmentPointIndex:null,arrowStartPoint:{x:null,y:null},graphicsSemaphore:0,schema:{internalCounter:-1,blocks:[],arrows:[],points:[]}},getters:{getArrowStartPoint(e){return{x:e.arrowStartPoint.x,y:e.arrowStartPoint.y}},getGraphicsSemaphore(e){return e.graphicsSemaphore},getTool(e){return e.tool},getSelectedBlockID(e){return e.selectedBlockID},getSelectedArrowID(e){return e.selectedArrowID},getSelectedSegmentPointIndex(e){return e.selectedSegmentPointIndex},getCurrentStep(e){return e.currentStep},getSchema(e){return e.schema},getBlocks(e){const t=[];return e.schema.blocks.forEach((e=>{t.push(U(e.centerX,e.centerY,e.type,e.sizeX,e.sizeY,e.id,e.text))})),t},getArrows(e){const t=[];return e.schema.arrows.forEach((e=>{t.push(V(e.idStart,e.idEnd,e.angleStart,e.angleEnd,e.id))})),t},getPoints(e){const t=[];return e.schema.points.forEach((e=>{t.push(W(e))})),t},getArrowPoints:e=>t=>{let n=[];return e.schema.points.forEach((e=>{n.push(W(e))})),n=n.filter((e=>e.arrowId===t.id)),n.sort(((e,t)=>e.order-t.order)),n}},mutations:{setArrowStartPoint(e,t){e.arrowStartPoint.x=t.x,e.arrowStartPoint.y=t.y},setGraphicsSemaphore(e,t){e.graphicsSemaphore=t},setTool(e,t){e.tool=t},setSelectedBlockID(e,t){e.selectedBlockID=t},setSelectedArrowID(e,t){e.selectedArrowID=t},setSelectedSegmentPointIndex(e,t){e.selectedSegmentPointIndex=t},setCurrentStep(e,t){e.currentStep=t},clearSchema(e){e.schema={internalCounter:e.schema.internalCounter,blocks:[],arrows:[],points:[]}},addBlock(e,t){e.schema.internalCounter--;const n=U(t.centerX,t.centerY,t.type,t.sizeX,t.sizeY,e.schema.internalCounter);e.schema.blocks.push(n)},moveBlock(e,t){e.schema.blocks.forEach((e=>{e.id===t.id&&(e.centerX=t.X,e.centerY=t.Y)}))},changeBlockText(e,t){e.schema.blocks.forEach((e=>{e.id===t.id&&(e.text=t.text)}))},changeArrowAngles(e,t){e.schema.arrows.forEach((e=>{e.id===t.id&&(e.angleStart=t.angleStart,e.angleEnd=t.angleEnd)}))},addArrow(e,t){e.schema.internalCounter--;const n=V(t.idStart,t.idEnd,t.angleStart,t.angleEnd,e.schema.internalCounter);e.schema.arrows.push(n)},addPoint(e,t){e.schema.internalCounter--;const n=W(t);n.id=e.schema.internalCounter,e.schema.points.forEach((e=>{e.arrowId===n.arrowId&&e.order>=n.order&&(e.order=e.order+1)})),e.schema.points.push(n)},removePoint(e,t){const n=W(t);e.schema.points.forEach((e=>{e.arrowId===n.arrowId&&e.order>=n.order&&(e.order=e.order-1)})),e.schema.points.splice(e.schema.points.findIndex((e=>e.id===n.id)),1)},movePoint(e,t){const n=e.schema.points.find((e=>t.id===e.id));n.x=t.x,n.y=t.y},addFromLoadBlock(e,t){const n=U(t.centerX,t.centerY,t.type,t.sizeX,t.sizeY,t.id,t.text);e.schema.blocks.push(n)},addFromLoadArrow(e,t){const n=V(t.idStart,t.idEnd,t.angleStart,t.angleEnd,t.id);e.schema.arrows.push(n)},addFromLoadPoint(e,t){const n=W(t);e.schema.points.forEach((e=>{e.arrowId===n.arrowId&&e.order>=n.order&&(e.order=e.order+1)})),e.schema.points.push(n)}},actions:{async changeArrowStartPoint(e,t){e.commit("setArrowStartPoint",t)},async changeCurrentStep(e,t){e.commit("setCurrentStep",t)},async countUpGraphicsSemaphore(e){e.commit("setGraphicsSemaphore",this.getGraphicsSemaphore+1)},async countDownGraphicsSemaphore(e){e.commit("setGraphicsSemaphore",this.getGraphicsSemaphore-1)},async changeTool(e,t){!0===te(t)?e.commit("setTool",t):e.commit("setTool",ee.UNSELECT_TOOLS)},async selectBlock(e,t){const n=this.getters.getBlocks.find((e=>e.id===t));null===n?this.dispatch("unselect"):(e.commit("setSelectedBlockID",n.id),e.commit("setCurrentStep",ie.SELECT_BLOCK_SELECTED),Ie.$emit("selectionChanged"))},async selectArrow(e,t){const n=this.getters.getArrows.find((e=>e.id===t.arrowId));null===n?this.dispatch("unselect"):(e.commit("setSelectedArrowID",t.arrowId),e.commit("setSelectedSegmentPointIndex",t.pointIndex),e.commit("setCurrentStep",ie.SELECT_ARROW_SEGMENT_SELECTED),Ie.$emit("selectionChanged"))},async defineStartPoint(e,t){e.commit("setArrowStartPoint",t),e.commit("setCurrentStep",ie.ARROWPLACING_STARTPOINT_DEFINED)},async unselect(e){e.commit("setSelectedBlockID",null),e.commit("setSelectedArrowID",null),e.commit("setSelectedSegmentPointIndex",null),e.commit("setCurrentStep",ie.SELECT_NONE_SELECTED),e.commit("setArrowStartPoint",{x:null,y:null}),Ie.$emit("selectionChanged")},async moveBlock(e,t){const n=this.getters.getBlocks.find((e=>e.id===t.id));null!=n&&e.commit("moveBlock",{id:t.id,X:t.X,Y:t.Y}),Ie.$emit("timeToDraw")},async clearSchema(e){e.commit("clearSchema"),Ie.$emit("timeToDraw")},async addBlock(e,t){e.commit("addBlock",t),Ie.$emit("timeToDraw")},async addArrow(e,t){e.commit("addArrow",t),Ie.$emit("timeToDraw")},async addPoint(e,t){e.commit("addPoint",t),Ie.$emit("timeToDraw")},async removePoint(e,t){e.commit("removePoint",t),Ie.$emit("timeToDraw")},async movePoint(e,t){this.getters.getPoints.findIndex((e=>e.id===t.id))>-1&&(e.commit("movePoint",t),Ie.$emit("timeToDraw"))},async moveArrowSegment(e,t){if(null!=t.moved[0]&&e.commit("movePoint",t.moved[0]),null!=t.moved[1]&&e.commit("movePoint",t.moved[1]),null!=t.deleted[0]&&e.commit("removePoint",t.deleted[0]),null!=t.deleted[1]&&e.commit("removePoint",t.deleted[1]),null!=t.added[0]){const n=W(t.added[0]);n.order=0,e.commit("addPoint",n)}const n=this.getters.getArrowPoints(t.arrow).length;if(null!=t.added[1]){const o=W(t.added[1]);o.order=n,e.commit("addPoint",o)}e.commit("changeArrowAngles",t.arrow),Ie.$emit("timeToDraw")},async changeBlockText(e,t){this.getters.getBlocks.findIndex((e=>e.id===t.id))>-1&&(this.dispatch("unselect"),e.commit("changeBlockText",t),Ie.$emit("timeToDraw"))},async saveSchema(e,t){if(null!=t&&t.length>0){const e={blocks:this.getters.getBlocks,arrows:this.getters.getArrows,points:this.getters.getPoints};ke().ajax({url:"http://localhost:8081/saveSchema/"+t,method:"POST",processData:!1,contentType:"application/json",dataType:"json",data:JSON.stringify({blocks:e.blocks,arrows:this.getters.getArrows,points:this.getters.getPoints}),success:function(e){},error:function(e){console.log(e)}})}},async loadSchema(e,t){null!=t&&t.length>0&&(await ke().ajax({url:"http://localhost:8081/getSchema/"+t,method:"Get",processData:!1,contentType:"application/json",dataType:"json",data:null,success:function(t){e.commit("clearSchema"),t.blocks.forEach((t=>{e.commit("addFromLoadBlock",t)})),t.arrows.forEach((t=>{e.commit("addFromLoadArrow",t)})),t.points.forEach((t=>{e.commit("addFromLoadPoint",t)}))},error:function(e){console.log(e)},complete:function(e){}}),Ie.$emit("timeToDraw"))}},methods:{},modules:{}}),Me=n(792);o.Ay.use(Me.A);var Ye=new Me.A({});o.Ay.config.productionTip=!1;const Ie=new o.Ay;new o.Ay({router:Pe,store:De,vuetify:Ye,render:e=>e(h)}).$mount("#app")},3215:function(e,t,n){var o={"./imgCardBig.svg":6401,"./imgDataBig.svg":3815,"./imgDecisionBig.svg":5149,"./imgDefProcessBig.svg":6459,"./imgDirectMemBig.svg":8407,"./imgDisplayBig.svg":4911,"./imgDocumentBig.svg":6618,"./imgManualInputBig.svg":6035,"./imgManualOperationBig.svg":6734,"./imgPaperTapeBig.svg":8776,"./imgPrepBig.svg":944,"./imgProcessBig.svg":8312,"./imgRAMBig.svg":6413,"./imgRecDataBig.svg":7995,"./imgSeqMemBig.svg":3103};function r(e){var t=i(e);return n(t)}function i(e){if(!n.o(o,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return o[e]}r.keys=function(){return Object.keys(o)},r.resolve=i,e.exports=r,r.id=3215},6834:function(e,t,n){var o={"./imgCardSmall.svg":4774,"./imgDataSmall.svg":32,"./imgDecisionSmall.svg":6386,"./imgDefProcessSmall.svg":9652,"./imgDirectMemSmall.svg":1264,"./imgDisplaySmall.svg":8600,"./imgDocumentSmall.svg":3045,"./imgManualInputSmall.svg":8716,"./imgManualOperationSmall.svg":8969,"./imgPaperTapeSmall.svg":1044,"./imgPrepSmall.svg":1431,"./imgProcessSmall.svg":3919,"./imgRAMSmall.svg":4002,"./imgRecDataSmall.svg":1860,"./imgSeqMemSmall.svg":2232};function r(e){var t=i(e);return n(t)}function i(e){if(!n.o(o,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return o[e]}r.keys=function(){return Object.keys(o)},r.resolve=i,e.exports=r,r.id=6834},6401:function(e,t,n){"use strict";e.exports=n.p+"img/imgCardBig.18d2d68e.svg"},4774:function(e,t,n){"use strict";e.exports=n.p+"img/imgCardSmall.5b61bd5e.svg"},3815:function(e,t,n){"use strict";e.exports=n.p+"img/imgDataBig.e2017acf.svg"},32:function(e,t,n){"use strict";e.exports=n.p+"img/imgDataSmall.9a3e1976.svg"},5149:function(e,t,n){"use strict";e.exports=n.p+"img/imgDecisionBig.c8f9b56d.svg"},6386:function(e,t,n){"use strict";e.exports=n.p+"img/imgDecisionSmall.4f8a6295.svg"},6459:function(e,t,n){"use strict";e.exports=n.p+"img/imgDefProcessBig.778f214b.svg"},9652:function(e,t,n){"use strict";e.exports=n.p+"img/imgDefProcessSmall.1f870446.svg"},8407:function(e,t,n){"use strict";e.exports=n.p+"img/imgDirectMemBig.2a4fd1a8.svg"},1264:function(e,t,n){"use strict";e.exports=n.p+"img/imgDirectMemSmall.cb909714.svg"},4911:function(e,t,n){"use strict";e.exports=n.p+"img/imgDisplayBig.43996f67.svg"},8600:function(e,t,n){"use strict";e.exports=n.p+"img/imgDisplaySmall.989e5071.svg"},6618:function(e,t,n){"use strict";e.exports=n.p+"img/imgDocumentBig.c8309fed.svg"},3045:function(e,t,n){"use strict";e.exports=n.p+"img/imgDocumentSmall.03635bcb.svg"},6035:function(e,t,n){"use strict";e.exports=n.p+"img/imgManualInputBig.a315b968.svg"},8716:function(e,t,n){"use strict";e.exports=n.p+"img/imgManualInputSmall.2d02c6ed.svg"},6734:function(e,t,n){"use strict";e.exports=n.p+"img/imgManualOperationBig.cd5eacfd.svg"},8969:function(e,t,n){"use strict";e.exports=n.p+"img/imgManualOperationSmall.af95b0e5.svg"},8776:function(e,t,n){"use strict";e.exports=n.p+"img/imgPaperTapeBig.d49cf5bc.svg"},1044:function(e,t,n){"use strict";e.exports=n.p+"img/imgPaperTapeSmall.3df0e956.svg"},944:function(e,t,n){"use strict";e.exports=n.p+"img/imgPrepBig.edc7102c.svg"},1431:function(e,t,n){"use strict";e.exports=n.p+"img/imgPrepSmall.a04ff8a0.svg"},8312:function(e,t,n){"use strict";e.exports=n.p+"img/imgProcessBig.f0f86715.svg"},3919:function(e,t,n){"use strict";e.exports=n.p+"img/imgProcessSmall.3118ee4d.svg"},6413:function(e,t,n){"use strict";e.exports=n.p+"img/imgRAMBig.7cf60857.svg"},4002:function(e,t,n){"use strict";e.exports=n.p+"img/imgRAMSmall.8e1b56e5.svg"},7995:function(e,t,n){"use strict";e.exports=n.p+"img/imgRecDataBig.8c7ec7c6.svg"},1860:function(e,t,n){"use strict";e.exports=n.p+"img/imgRecDataSmall.cc05bfa3.svg"},3103:function(e,t,n){"use strict";e.exports=n.p+"img/imgSeqMemBig.58ed11dc.svg"},2232:function(e,t,n){"use strict";e.exports=n.p+"img/imgSeqMemSmall.fbecca8a.svg"}},t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var i=t[o]={exports:{}};return e[o].call(i.exports,i,i.exports,n),i.exports}n.m=e,function(){var e=[];n.O=function(t,o,r,i){if(!o){var s=1/0;for(d=0;d<e.length;d++){o=e[d][0],r=e[d][1],i=e[d][2];for(var c=!0,a=0;a<o.length;a++)(!1&i||s>=i)&&Object.keys(n.O).every((function(e){return n.O[e](o[a])}))?o.splice(a--,1):(c=!1,i<s&&(s=i));if(c){e.splice(d--,1);var l=r();void 0!==l&&(t=l)}}return t}i=i||0;for(var d=e.length;d>0&&e[d-1][2]>i;d--)e[d]=e[d-1];e[d]=[o,r,i]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,o){return n.f[o](e,t),t}),[]))}}(),function(){n.u=function(e){return"js/about.612d7a74.js"}}(),function(){n.miniCssF=function(e){}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="flowchart:";n.l=function(o,r,i,s){if(e[o])e[o].push(r);else{var c,a;if(void 0!==i)for(var l=document.getElementsByTagName("script"),d=0;d<l.length;d++){var u=l[d];if(u.getAttribute("src")==o||u.getAttribute("data-webpack")==t+i){c=u;break}}c||(a=!0,c=document.createElement("script"),c.charset="utf-8",c.timeout=120,n.nc&&c.setAttribute("nonce",n.nc),c.setAttribute("data-webpack",t+i),c.src=o),e[o]=[r];var h=function(t,n){c.onerror=c.onload=null,clearTimeout(g);var r=e[o];if(delete e[o],c.parentNode&&c.parentNode.removeChild(c),r&&r.forEach((function(e){return e(n)})),t)return t(n)},g=setTimeout(h.bind(null,void 0,{type:"timeout",target:c}),12e4);c.onerror=h.bind(null,c.onerror),c.onload=h.bind(null,c.onload),a&&document.head.appendChild(c)}}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){n.p="/"}(),function(){var e={524:0};n.f.j=function(t,o){var r=n.o(e,t)?e[t]:void 0;if(0!==r)if(r)o.push(r[2]);else{var i=new Promise((function(n,o){r=e[t]=[n,o]}));o.push(r[2]=i);var s=n.p+n.u(t),c=new Error,a=function(o){if(n.o(e,t)&&(r=e[t],0!==r&&(e[t]=void 0),r)){var i=o&&("load"===o.type?"missing":o.type),s=o&&o.target&&o.target.src;c.message="Loading chunk "+t+" failed.\n("+i+": "+s+")",c.name="ChunkLoadError",c.type=i,c.request=s,r[1](c)}};n.l(s,a,"chunk-"+t,t)}},n.O.j=function(t){return 0===e[t]};var t=function(t,o){var r,i,s=o[0],c=o[1],a=o[2],l=0;if(s.some((function(t){return 0!==e[t]}))){for(r in c)n.o(c,r)&&(n.m[r]=c[r]);if(a)var d=a(n)}for(t&&t(o);l<s.length;l++)i=s[l],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return n.O(d)},o=self["webpackChunkflowchart"]=self["webpackChunkflowchart"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=n.O(void 0,[504],(function(){return n(9260)}));o=n.O(o)})();
//# sourceMappingURL=app.ac2d60fb.js.map